var ResponsiveVideo=function(){"use strict";const m=["mp4","webm","ogg","x-m4v","quicktime","x-ms-wmv","mpeg","3gpp","3gpp2"];function f(){return Array.from(document.querySelectorAll("video[data-responsive-video]"))}function y(e){const t=e.split("."),s=t[t.length-1];return m.includes(s)?`video/${s}`:void 0}function l(e){return e=/^\(/.test(e)?e:`(${e}`,/\)$/.test(e)?e:`${e})`}const u=({videoEl:e,options:t,breakpoint:s})=>{const i=e.currentTime,{src:n,poster:r}=t[s],a=Array.isArray(n)?[...n]:[n],d=()=>{e.currentTime=i<e.duration?i:0,e.play(),e.removeEventListener("loadedmetadata",d)};e.pause(),r&&e.setAttribute("poster",r),e.querySelectorAll("source")?.forEach(o=>{o.remove()}),a.forEach(o=>{const c=document.createElement("source"),p=y(o);c.setAttribute("src",o),p?c.setAttribute("type",p):c.removeAttribute("type"),e.appendChild(c)}),e.addEventListener("loadedmetadata",d),e.load()};function g(){f().forEach(t=>{const s=JSON.parse(t.dataset.responsiveVideo);Object.keys(s).forEach(n=>{const r=l(n);window.matchMedia(r).matches&&u({videoEl:t,options:s,breakpoint:n}),window.matchMedia(r).addEventListener("change",({matches:a})=>{a&&u({videoEl:t,options:s,breakpoint:n})})})})}return g}();
