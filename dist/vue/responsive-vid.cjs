"use strict";const e=require("vue"),A=e.defineComponent({name:"ResponsiveVideo",props:{options:{type:Object,required:!0},isAutoplay:{type:Boolean,required:!1,default:!1}},setup(o){const{options:s,isAutoplay:l}=e.toRefs(o),i=Object.keys(s.value),p=["mp4","webm","ogg","x-m4v","quicktime","x-ms-wmv","mpeg","3gpp","3gpp2"],n=e.ref(),u=e.ref([]),d=e.ref(),v=e.ref(0),f=e.ref(!l.value),$=e.computed(()=>l.value?{muted:!0,autoplay:!0,loop:!0,playsinline:!0}:{}),B=t=>{const r=t.split("."),a=r[r.length-1];return p.includes(a)?`video/${a}`:void 0},V=t=>(t=/^\(/.test(t)?t:`(${t}`,/\)$/.test(t)?t:`${t})`),E=()=>{var t;n.value&&(n.value.currentTime=v.value<((t=n.value)==null?void 0:t.duration)?v.value:0,f.value||n.value.play())},m=t=>{var c,y,g;const{src:r,poster:a}=s.value[t];(c=n.value)==null||c.pause(),v.value=((y=n.value)==null?void 0:y.currentTime)||0,d.value=a||d.value||void 0,u.value=Array.isArray(r)?[...r]:[r],(g=n.value)==null||g.load()},k=()=>{i.forEach(t=>{const r=V(t),a=window.matchMedia(r);a.matches&&m(t),a.addEventListener("change",({matches:c})=>{c&&m(t)})})};return e.onMounted(()=>{k()}),{backgroundVideoAttrs:$,getMediaType:B,handleVideoLoad:E,isPaused:f,poster:d,sources:u,videoEl:n}}}),L=(o,s)=>{const l=o.__vccOpts||o;for(const[i,p]of s)l[i]=p;return l},P=["poster"],T=["src","type"];function h(o,s,l,i,p,n){return e.openBlock(),e.createElementBlock("video",e.mergeProps({ref:"videoEl",poster:o.poster},o.backgroundVideoAttrs,{onLoadedmetadata:s[0]||(s[0]=(...u)=>o.handleVideoLoad&&o.handleVideoLoad(...u)),onPause:s[1]||(s[1]=()=>o.isPaused=!0),onPlay:s[2]||(s[2]=()=>o.isPaused=!1)}),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.sources,(u,d)=>(e.openBlock(),e.createElementBlock("source",{key:d,src:u,type:o.getMediaType(u)},null,8,T))),128)),e.renderSlot(o.$slots,"default")],16,P)}const M=L(A,[["render",h]]);module.exports=M;
