"use strict";const e=require("vue"),B=e.defineComponent({name:"ResponsiveVideo",props:{options:{type:Object,required:!0},isautoplay:{type:Boolean,required:!1,default:!1}},setup(o){const{options:r,isautoplay:l}=e.toRefs(o),c=Object.keys(r.value),i=["mp4","webm","ogg","x-m4v","quicktime","x-ms-wmv","mpeg","3gpp","3gpp2"],s=e.ref(),a=e.ref([]),d=e.ref(),p=e.ref(0),m=l.value?{muted:!0,autoplay:!0,loop:!0,playsinline:!0}:{},f=t=>{const n=t.split("."),u=n[n.length-1];return i.includes(u)?`video/${u}`:void 0},y=t=>(t=/^\(/.test(t)?t:`(${t}`,/\)$/.test(t)?t:`${t})`),g=()=>{s.value&&(s.value.currentTime=p.value<s.value?.duration?p.value:0,s.value.play())},v=t=>{const{src:n,poster:u}=r.value[t];s.value?.pause(),p.value=s.value?.currentTime||0,d.value=u||d.value||void 0,a.value=Array.isArray(n)?[...n]:[n],s.value?.load()},h=()=>{c.forEach(t=>{const n=y(t),u=window.matchMedia(n);u.matches&&v(t),u.addEventListener("change",({matches:$})=>{$&&v(t)})})};return e.onMounted(()=>{h(),console.log("test 2")}),{backgroundVideoAttrs:m,getMediaType:f,handleVideoLoad:g,poster:d,sources:a,videoEl:s}}}),V=(o,r)=>{const l=o.__vccOpts||o;for(const[c,i]of r)l[c]=i;return l},E=["poster"],k=["src","type"];function L(o,r,l,c,i,s){return e.openBlock(),e.createElementBlock("video",e.mergeProps({ref:"videoEl",poster:o.poster},o.backgroundVideoAttrs,{onLoadedmetadata:r[0]||(r[0]=(...a)=>o.handleVideoLoad&&o.handleVideoLoad(...a))}),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.sources,(a,d)=>(e.openBlock(),e.createElementBlock("source",{key:d,src:a,type:o.getMediaType(a)},null,8,k))),128)),e.renderSlot(o.$slots,"default")],16,E)}const T=V(B,[["render",L]]);module.exports=T;
