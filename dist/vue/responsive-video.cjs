"use strict";const t=require("vue"),L=t.defineComponent({name:"ResponsiveVideo",props:{options:{type:Object,required:!0},isautoplay:{type:Boolean,required:!1,default:!1}},setup(o){const{options:s,isautoplay:l}=t.toRefs(o),i=Object.keys(s.value),p=["mp4","webm","ogg","x-m4v","quicktime","x-ms-wmv","mpeg","3gpp","3gpp2"],n=t.ref(),u=t.ref([]),d=t.ref(),v=t.ref(0),f=t.ref(!l.value),$=l.value?{muted:!0,autoplay:!0,loop:!0,playsinline:!0}:{},B=e=>{const r=e.split("."),a=r[r.length-1];return p.includes(a)?`video/${a}`:void 0},V=e=>(e=/^\(/.test(e)?e:`(${e}`,/\)$/.test(e)?e:`${e})`),E=()=>{var e;n.value&&(n.value.currentTime=v.value<((e=n.value)==null?void 0:e.duration)?v.value:0,f.value||n.value.play())},m=e=>{var c,y,g;const{src:r,poster:a}=s.value[e];(c=n.value)==null||c.pause(),v.value=((y=n.value)==null?void 0:y.currentTime)||0,d.value=a||d.value||void 0,u.value=Array.isArray(r)?[...r]:[r],(g=n.value)==null||g.load()},k=()=>{i.forEach(e=>{const r=V(e),a=window.matchMedia(r);a.matches&&m(e),a.addEventListener("change",({matches:c})=>{c&&m(e)})})};return t.onMounted(()=>{k()}),{backgroundVideoAttrs:$,getMediaType:B,handleVideoLoad:E,isPaused:f,poster:d,sources:u,videoEl:n}}}),P=(o,s)=>{const l=o.__vccOpts||o;for(const[i,p]of s)l[i]=p;return l},T=["poster"],h=["src","type"];function M(o,s,l,i,p,n){return t.openBlock(),t.createElementBlock("video",t.mergeProps({ref:"videoEl",poster:o.poster},o.backgroundVideoAttrs,{onLoadedmetadata:s[0]||(s[0]=(...u)=>o.handleVideoLoad&&o.handleVideoLoad(...u)),onPause:s[1]||(s[1]=()=>o.isPaused=!0),onPlay:s[2]||(s[2]=()=>o.isPaused=!1)}),[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.sources,(u,d)=>(t.openBlock(),t.createElementBlock("source",{key:d,src:u,type:o.getMediaType(u)},null,8,h))),128)),t.renderSlot(o.$slots,"default")],16,T)}const q=P(L,[["render",M]]);module.exports=q;
