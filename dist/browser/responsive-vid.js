var ResponsiveVideo=function(){"use strict";var y=Object.defineProperty;var g=(o,i,r)=>i in o?y(o,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[i]=r;var d=(o,i,r)=>g(o,typeof i!="symbol"?i+"":i,r);const o=["mp4","webm","ogg","x-m4v","quicktime","x-ms-wmv","mpeg","3gpp","3gpp2"];function i(){return Array.from(document.querySelectorAll("video[data-responsive-video]"))}function r(s){const e=s.split("."),t=e[e.length-1];return o.includes(t)?`video/${t}`:void 0}function p(s){return s=/^\(/.test(s)?s:`(${s}`,/\)$/.test(s)?s:`${s})`}function E(){i().forEach(e=>{const t=JSON.parse(e.dataset.responsiveVideo);new m({el:e,options:t})})}class m{constructor({el:e,options:t}){d(this,"videoEl");d(this,"options");d(this,"breakpoints");d(this,"isPaused");d(this,"playListener",()=>{this.isPaused=!1});d(this,"pauseListener",()=>{this.isPaused=!0});if(!Object.keys(t).length)throw Error("No options provided to responsive-vid.js");if(typeof e=="string"||e.nodeName!=="VIDEO")throw Error('Invalid "el" provided to responsive-vid.js');this.videoEl=e,this.options=t,this.breakpoints=Object.keys(t),this.isPaused=this.videoEl.paused,this.init()}init(){this.videoEl.addEventListener("pause",this.pauseListener),this.videoEl.addEventListener("play",this.playListener),this.breakpoints.forEach(e=>{const t=p(e),n=window.matchMedia(t);n.matches&&this.addVideo(e),n.addEventListener("change",({matches:a})=>{a&&this.addVideo(e)})})}addVideo(e){var u;const t=this.videoEl.currentTime,{src:n,poster:a}=this.options[e],f=Array.isArray(n)?[...n]:[n],v=()=>{this.videoEl.currentTime=t<this.videoEl.duration?t:0,this.isPaused===!1&&this.videoEl.play(),this.videoEl.removeEventListener("loadedmetadata",v)};a&&this.videoEl.setAttribute("poster",a),(u=this.videoEl.querySelectorAll("source"))==null||u.forEach(c=>{c.remove()}),f.forEach(c=>{const l=document.createElement("source"),h=r(c);l.setAttribute("src",c),h?l.setAttribute("type",h):l.removeAttribute("type"),this.videoEl.appendChild(l)}),this.videoEl.addEventListener("loadedmetadata",v),this.videoEl.load()}}return E}();
